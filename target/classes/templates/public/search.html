<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>Creator'larƒ± Ke≈üfet</title>
</head>

<body>
    <main layout:fragment="content">

        <div class="container-custom py-8" x-data="searchPage()">

            <!-- Page Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">AI Creator'larƒ± Ke≈üfet</h1>
                <p class="text-gray-600">Markanƒ±z i√ßin m√ºkemmel AI influencer'ƒ± bulun</p>
            </div>

            <!-- Search Bar -->
            <div class="bg-white border border-gray-200 rounded-lg p-4 mb-8">
                <div class="flex flex-col sm:flex-row gap-4">
                    <div class="flex-1">
                        <input type="text" x-model="searchQuery" @input.debounce.300ms="performSearch"
                            placeholder="Creator, stil veya kategori ara..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none" />
                    </div>
                    <button class="btn btn-primary" @click="performSearch">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        Ara
                    </button>
                </div>
            </div>

            <div class="flex flex-col lg:flex-row gap-8">

                <!-- Filters Sidebar -->
                <aside class="w-full lg:w-64 shrink-0">
                    <div class="bg-white border border-gray-200 rounded-lg p-5 sticky top-20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-gray-900">Filtreler</h3>
                            <button @click="clearFilters" class="text-sm text-primary hover:underline">Temizle</button>
                        </div>

                        <!-- Gender Filter -->
                        <div class="mb-5">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cinsiyet</label>
                            <select x-model="filters.gender" @change="applyFilters"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
                                <option value="">T√ºm√º</option>
                                <template x-for="gender in filterOptions.genders">
                                    <option :value="gender" x-text="gender"></option>
                                </template>
                            </select>
                        </div>

                        <!-- Hair Color Filter -->
                        <div class="mb-5">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sa√ß Rengi</label>
                            <select x-model="filters.hairColor" @change="applyFilters"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
                                <option value="">T√ºm√º</option>
                                <template x-for="color in filterOptions.hairColors">
                                    <option :value="color" x-text="color"></option>
                                </template>
                            </select>
                        </div>

                        <!-- Style Filter -->
                        <div class="mb-5">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Stil</label>
                            <select x-model="filters.style" @change="applyFilters"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
                                <option value="">T√ºm√º</option>
                                <template x-for="style in filterOptions.styles">
                                    <option :value="style" x-text="style"></option>
                                </template>
                            </select>
                        </div>

                        <!-- Price Range -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Max Fiyat: <span class="text-primary font-semibold"
                                    x-text="'‚Ç∫' + filters.maxPrice"></span>
                            </label>
                            <input type="range" x-model="filters.maxPrice" min="100" max="5000" step="100"
                                class="w-full accent-primary" />
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>‚Ç∫100</span>
                                <span>‚Ç∫5000</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Results Grid -->
                <div class="flex-1">

                    <!-- Results Header -->
                    <div class="flex items-center justify-between mb-6">
                        <p class="text-gray-600">
                            <span class="font-semibold text-gray-900" x-text="filteredPersonas.length"></span>
                            creator bulundu
                        </p>
                        <select x-model="sortBy" @change="sortResults"
                            class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary outline-none">
                            <option value="popular">En Pop√ºler</option>
                            <option value="rating">En Y√ºksek Puan</option>
                            <option value="newest">En Yeni</option>
                            <option value="price_low">Fiyat: D√º≈ü√ºkten Y√ºkseƒüe</option>
                            <option value="price_high">Fiyat: Y√ºksekten D√º≈ü√ºƒüe</option>
                        </select>
                    </div>

                    <!-- Creator Cards Grid -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                        <template x-for="persona in filteredPersonas" :key="persona.id">
                            <a :href="'/creator/' + persona.id"
                                class="bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow group">
                                <!-- Image -->
                                <div class="aspect-[3/4] overflow-hidden">
                                    <img :src="persona.profileImages[0]" :alt="persona.name"
                                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
                                </div>

                                <div class="p-4">
                                    <!-- Name & Style -->
                                    <div class="flex items-center gap-2 mb-2">
                                        <h3 class="font-semibold text-gray-900" x-text="persona.name"></h3>
                                        <span class="bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded"
                                            x-text="persona.style"></span>
                                    </div>

                                    <!-- Bio -->
                                    <p class="text-sm text-gray-500 line-clamp-2 mb-3" x-text="persona.bio"></p>

                                    <!-- Tags -->
                                    <div class="flex flex-wrap gap-1 mb-3">
                                        <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded"
                                            x-text="persona.gender"></span>
                                        <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded"
                                            x-text="persona.hairColor + ' sa√ß'"></span>
                                    </div>

                                    <!-- Stats & Price -->
                                    <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                                        <div class="flex items-center gap-3 text-sm">
                                            <span class="flex items-center gap-1">
                                                <span class="text-yellow-500">‚òÖ</span>
                                                <span x-text="persona.stats.avgRating">4.9</span>
                                            </span>
                                            <span class="text-gray-400">|</span>
                                            <span class="text-gray-500"
                                                x-text="persona.stats.completedOrders + ' sipari≈ü'"></span>
                                        </div>
                                        <span class="font-semibold text-primary">‚Ç∫500</span>
                                    </div>
                                </div>
                            </a>
                        </template>
                    </div>

                    <!-- Empty State -->
                    <div x-show="filteredPersonas.length === 0" class="text-center py-16">
                        <div class="text-6xl mb-4">üîç</div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Sonu√ß Bulunamadƒ±</h3>
                        <p class="text-gray-600 mb-4">Arama kriterlerinize uygun creator bulunamadƒ±.</p>
                        <button class="btn btn-primary" @click="clearFilters">Filtreleri Temizle</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function searchPage() {
                return {
                    searchQuery: '',
                    sortBy: 'popular',
                    filterOptions: MockData.filterOptions,
                    filters: {
                        gender: '',
                        hairColor: '',
                        style: '',
                        maxPrice: 5000
                    },
                    allPersonas: MockData.personas,
                    filteredPersonas: MockData.personas,

                    performSearch() {
                        this.applyFilters();
                    },

                    applyFilters() {
                        let results = [...this.allPersonas];

                        // Text search
                        if (this.searchQuery) {
                            const q = this.searchQuery.toLowerCase();
                            results = results.filter(p =>
                                p.name.toLowerCase().includes(q) ||
                                p.bio.toLowerCase().includes(q) ||
                                p.style.toLowerCase().includes(q)
                            );
                        }

                        // Apply filters
                        if (this.filters.gender) {
                            results = results.filter(p => p.gender === this.filters.gender);
                        }
                        if (this.filters.hairColor) {
                            results = results.filter(p => p.hairColor === this.filters.hairColor);
                        }
                        if (this.filters.style) {
                            results = results.filter(p => p.style === this.filters.style);
                        }

                        this.filteredPersonas = results;
                        this.sortResults();
                    },

                    sortResults() {
                        switch (this.sortBy) {
                            case 'rating':
                                this.filteredPersonas.sort((a, b) => b.stats.avgRating - a.stats.avgRating);
                                break;
                            case 'popular':
                                this.filteredPersonas.sort((a, b) => b.stats.completedOrders - a.stats.completedOrders);
                                break;
                            default:
                                break;
                        }
                    },

                    clearFilters() {
                        this.searchQuery = '';
                        this.filters = {
                            gender: '',
                            hairColor: '',
                            style: '',
                            maxPrice: 5000
                        };
                        this.filteredPersonas = [...this.allPersonas];
                    }
                }
            }
        </script>

    </main>
</body>

</html>