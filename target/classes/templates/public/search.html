<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>Ke≈üfet</title>
</head>

<body>
    <main layout:fragment="content">

        <div class="container mx-auto px-4 py-8" x-data="searchPage()">

            <!-- Page Header -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold mb-2">AI Creator'larƒ± Ke≈üfedin</h1>
                <p class="text-base-content/60">Markanƒ±z i√ßin m√ºkemmel AI influencer'ƒ± bulun</p>
            </div>

            <!-- Search Bar -->
            <div class="max-w-2xl mx-auto mb-8">
                <div class="join w-full">
                    <input type="text" x-model="searchQuery" @input.debounce.300ms="performSearch"
                        placeholder="Creator, stil veya kategori ara..."
                        class="input input-bordered join-item w-full" />
                    <button class="btn btn-primary join-item" @click="performSearch">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex flex-col lg:flex-row gap-8">

                <!-- Filters Sidebar -->
                <aside class="w-full lg:w-72 shrink-0">
                    <div class="card bg-base-200 shadow-lg sticky top-24">
                        <div class="card-body">
                            <h3 class="card-title text-lg mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                                </svg>
                                Filtreler
                            </h3>

                            <!-- Gender Filter -->
                            <div class="form-control mb-4">
                                <label class="label">
                                    <span class="label-text font-medium">Cinsiyet</span>
                                </label>
                                <select x-model="filters.gender" @change="applyFilters"
                                    class="select select-bordered w-full">
                                    <option value="">T√ºm√º</option>
                                    <template x-for="gender in filterOptions.genders">
                                        <option :value="gender" x-text="gender"></option>
                                    </template>
                                </select>
                            </div>

                            <!-- Hair Color Filter -->
                            <div class="form-control mb-4">
                                <label class="label">
                                    <span class="label-text font-medium">Sa√ß Rengi</span>
                                </label>
                                <select x-model="filters.hairColor" @change="applyFilters"
                                    class="select select-bordered w-full">
                                    <option value="">T√ºm√º</option>
                                    <template x-for="color in filterOptions.hairColors">
                                        <option :value="color" x-text="color"></option>
                                    </template>
                                </select>
                            </div>

                            <!-- Style Filter -->
                            <div class="form-control mb-4">
                                <label class="label">
                                    <span class="label-text font-medium">Stil</span>
                                </label>
                                <select x-model="filters.style" @change="applyFilters"
                                    class="select select-bordered w-full">
                                    <option value="">T√ºm√º</option>
                                    <template x-for="style in filterOptions.styles">
                                        <option :value="style" x-text="style"></option>
                                    </template>
                                </select>
                            </div>

                            <!-- Price Range -->
                            <div class="form-control mb-4">
                                <label class="label">
                                    <span class="label-text font-medium">Fiyat Aralƒ±ƒüƒ±</span>
                                </label>
                                <input type="range" x-model="filters.maxPrice" min="100" max="5000" step="100"
                                    class="range range-primary range-sm" />
                                <div class="flex justify-between text-xs mt-1">
                                    <span>‚Ç∫100</span>
                                    <span class="font-semibold text-primary" x-text="'‚Ç∫' + filters.maxPrice"></span>
                                    <span>‚Ç∫5000</span>
                                </div>
                            </div>

                            <!-- Clear Filters -->
                            <button class="btn btn-outline btn-sm mt-4" @click="clearFilters">
                                Filtreleri Temizle
                            </button>
                        </div>
                    </div>
                </aside>

                <!-- Results Grid -->
                <div class="flex-1">

                    <!-- Results Header -->
                    <div class="flex items-center justify-between mb-6">
                        <p class="text-base-content/70">
                            <span class="font-semibold text-base-content" x-text="filteredPersonas.length"></span>
                            creator bulundu
                        </p>
                        <select x-model="sortBy" @change="sortResults" class="select select-bordered select-sm">
                            <option value="popular">En Pop√ºler</option>
                            <option value="rating">En Y√ºksek Puan</option>
                            <option value="newest">En Yeni</option>
                            <option value="price_low">Fiyat: D√º≈ü√ºkten Y√ºkseƒüe</option>
                            <option value="price_high">Fiyat: Y√ºksekten D√º≈ü√ºƒüe</option>
                        </select>
                    </div>

                    <!-- Creator Cards Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        <template x-for="persona in filteredPersonas" :key="persona.id">
                            <div
                                class="card bg-base-200 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 group">
                                <!-- Image -->
                                <figure class="relative overflow-hidden">
                                    <img :src="persona.profileImages[0]" :alt="persona.name"
                                        class="w-full h-72 object-cover group-hover:scale-105 transition-transform duration-300" />
                                    <div class="absolute top-3 right-3">
                                        <div class="badge badge-primary" x-text="persona.style"></div>
                                    </div>
                                    <!-- Quick Stats Overlay -->
                                    <div
                                        class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                        <div class="flex justify-between text-white text-sm">
                                            <span>‚≠ê <span x-text="persona.stats.avgRating"></span></span>
                                            <span>üì¶ <span x-text="persona.stats.completedOrders"></span> sipari≈ü</span>
                                        </div>
                                    </div>
                                </figure>

                                <div class="card-body">
                                    <h3 class="card-title" x-text="persona.name"></h3>
                                    <p class="text-sm text-base-content/70 line-clamp-2" x-text="persona.bio"></p>

                                    <!-- Tags -->
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="badge badge-outline badge-sm" x-text="persona.gender"></span>
                                        <span class="badge badge-outline badge-sm"
                                            x-text="persona.hairColor + ' sa√ß'"></span>
                                        <span class="badge badge-outline badge-sm"
                                            x-text="persona.eyeColor + ' g√∂z'"></span>
                                    </div>

                                    <!-- Stats -->
                                    <div class="flex items-center gap-4 mt-3 text-sm">
                                        <div class="flex items-center gap-1 text-warning">
                                            <span>‚≠ê</span>
                                            <span x-text="persona.stats.avgRating"></span>
                                        </div>
                                        <div class="flex items-center gap-1">
                                            <span>‚è±Ô∏è</span>
                                            <span x-text="persona.stats.responseTime"></span>
                                        </div>
                                    </div>

                                    <div class="card-actions justify-between items-center mt-4">
                                        <div>
                                            <span class="text-xs text-base-content/50">ba≈ülayan fiyat</span>
                                            <p class="text-lg font-bold text-primary">‚Ç∫500</p>
                                        </div>
                                        <a :href="'/creator/' + persona.id" class="btn btn-primary btn-sm">
                                            Profili G√∂r
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>

                    <!-- Empty State -->
                    <div x-show="filteredPersonas.length === 0" class="text-center py-16">
                        <div class="text-6xl mb-4">üîç</div>
                        <h3 class="text-xl font-semibold mb-2">Sonu√ß Bulunamadƒ±</h3>
                        <p class="text-base-content/60 mb-4">Arama kriterlerinize uygun creator bulunamadƒ±.</p>
                        <button class="btn btn-primary" @click="clearFilters">Filtreleri Temizle</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function searchPage() {
                return {
                    searchQuery: '',
                    sortBy: 'popular',
                    filterOptions: MockData.filterOptions,
                    filters: {
                        gender: '',
                        hairColor: '',
                        style: '',
                        maxPrice: 5000
                    },
                    allPersonas: MockData.personas,
                    filteredPersonas: MockData.personas,

                    performSearch() {
                        this.applyFilters();
                    },

                    applyFilters() {
                        let results = [...this.allPersonas];

                        // Text search
                        if (this.searchQuery) {
                            const q = this.searchQuery.toLowerCase();
                            results = results.filter(p =>
                                p.name.toLowerCase().includes(q) ||
                                p.bio.toLowerCase().includes(q) ||
                                p.style.toLowerCase().includes(q)
                            );
                        }

                        // Apply filters
                        if (this.filters.gender) {
                            results = results.filter(p => p.gender === this.filters.gender);
                        }
                        if (this.filters.hairColor) {
                            results = results.filter(p => p.hairColor === this.filters.hairColor);
                        }
                        if (this.filters.style) {
                            results = results.filter(p => p.style === this.filters.style);
                        }

                        this.filteredPersonas = results;
                        this.sortResults();
                    },

                    sortResults() {
                        switch (this.sortBy) {
                            case 'rating':
                                this.filteredPersonas.sort((a, b) => b.stats.avgRating - a.stats.avgRating);
                                break;
                            case 'popular':
                                this.filteredPersonas.sort((a, b) => b.stats.completedOrders - a.stats.completedOrders);
                                break;
                            default:
                                break;
                        }
                    },

                    clearFilters() {
                        this.searchQuery = '';
                        this.filters = {
                            gender: '',
                            hairColor: '',
                            style: '',
                            maxPrice: 5000
                        };
                        this.filteredPersonas = [...this.allPersonas];
                    }
                }
            }
        </script>

    </main>
</body>

</html>