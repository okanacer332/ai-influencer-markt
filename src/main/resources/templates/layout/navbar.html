<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- Enhanced Navbar Fragment -->
<nav th:fragment="navbar"
    class="navbar bg-base-100/95 backdrop-blur-lg shadow-sm sticky top-0 z-50 border-b border-base-200">
    <div class="container mx-auto px-4">

        <!-- Left: Logo -->
        <div class="navbar-start">
            <a href="/" class="flex items-center gap-2 text-xl font-bold">
                <img src="/images/olric-logo.png" alt="Olric" class="w-8 h-8">
                <span class="hidden sm:inline text-gradient">Olric</span>
            </a>
        </div>

        <!-- Center: Search (Desktop) -->
        <div class="navbar-center hidden lg:flex">
            <div class="join">
                <input type="text" placeholder="Creator veya hizmet ara..."
                    class="input input-bordered join-item w-80 focus:outline-none focus:border-primary" />
                <a href="/search" class="btn btn-primary join-item">
                    <i class="ph ph-magnifying-glass text-xl"></i>
                </a>
            </div>
        </div>

        <!-- Right: Nav Items -->
        <div class="navbar-end gap-1">

            <!-- Browse Button (Desktop) -->
            <a href="/search" class="btn btn-ghost gap-2 hidden md:flex">
                <i class="ph ph-compass text-xl"></i>
                <span>KeÅŸfet</span>
            </a>

            <!-- Theme Toggle -->
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle">
                    <i class="ph ph-moon text-xl"></i>
                </label>
                <ul tabindex="0"
                    class="dropdown-content z-[100] menu p-2 shadow-xl bg-base-100 rounded-box w-52 mt-2 border border-base-200">
                    <li><a @click="$store.theme.set('aiMarket')">â˜€ï¸ AÃ§Ä±k Tema</a></li>
                    <li><a @click="$store.theme.set('aiMarketDark')">ğŸŒ™ Koyu Tema</a></li>
                    <li><a @click="$store.theme.set('cyberpunk')">ğŸŒˆ Cyberpunk</a></li>
                </ul>
            </div>

            <!-- Auth Section -->
            <div x-data x-cloak>
                <!-- Not Logged In -->
                <template x-if="!$store.auth.isLoggedIn">
                    <div class="flex items-center gap-2">
                        <a href="/login" class="btn btn-ghost btn-sm">GiriÅŸ Yap</a>
                        <a href="/register" class="btn btn-primary btn-sm">KayÄ±t Ol</a>
                    </div>
                </template>

                <!-- Logged In - User Menu -->
                <template x-if="$store.auth.isLoggedIn">
                    <div class="dropdown dropdown-end">
                        <label tabindex="0" class="btn btn-ghost btn-circle avatar">
                            <div class="w-9 rounded-full ring-2 ring-primary ring-offset-base-100 ring-offset-1">
                                <img :src="$store.auth.user?.avatar" :alt="$store.auth.user?.name" />
                            </div>
                        </label>
                        <ul tabindex="0"
                            class="dropdown-content z-[100] menu p-2 shadow-xl bg-base-100 rounded-box w-64 mt-2 border border-base-200">
                            <!-- User Info -->
                            <li class="px-4 py-3 border-b border-base-200">
                                <div class="flex items-center gap-3 hover:bg-transparent cursor-default">
                                    <div class="avatar">
                                        <div class="w-10 rounded-full">
                                            <img :src="$store.auth.user?.avatar" />
                                        </div>
                                    </div>
                                    <div>
                                        <p class="font-semibold" x-text="$store.auth.user?.name"></p>
                                        <span class="badge badge-sm badge-primary"
                                            x-text="$store.auth.user?.role"></span>
                                    </div>
                                </div>
                            </li>

                            <!-- Role-based menu items -->
                            <template x-if="$store.auth.user?.role === 'BRAND'">
                                <div>
                                    <li><a href="/brand/dashboard">ğŸ“Š Dashboard</a></li>
                                    <li><a href="/brand/orders">ğŸ“¦ SipariÅŸlerim</a></li>
                                </div>
                            </template>

                            <template x-if="$store.auth.user?.role === 'CREATOR'">
                                <div>
                                    <li><a href="/creator/dashboard">ğŸ“Š Dashboard</a></li>
                                    <li><a href="/creator/gigs">ğŸ¨ Ä°lanlarÄ±m</a></li>
                                    <li><a href="/creator/orders">ğŸ“¦ SipariÅŸler</a></li>
                                    <li><a href="/creator/gigs/new">â• Yeni Ä°lan</a></li>
                                </div>
                            </template>

                            <template x-if="$store.auth.user?.role === 'ADMIN'">
                                <div>
                                    <li><a href="/admin/dashboard">ğŸ“Š Admin Panel</a></li>
                                    <li><a href="/admin/pending-creators">â³ Onay Bekleyenler</a></li>
                                    <li><a href="/admin/disputes">âš–ï¸ Ä°tirazlar</a></li>
                                </div>
                            </template>

                            <div class="divider my-1"></div>
                            <li><a href="/profile">âš™ï¸ Ayarlar</a></li>
                            <li><a @click="$store.auth.logout()" class="text-error">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</a></li>
                        </ul>
                    </div>
                </template>
            </div>

            <!-- Mobile Menu Button -->
            <div class="dropdown dropdown-end lg:hidden">
                <label tabindex="0" class="btn btn-ghost btn-circle">
                    <i class="ph ph-list text-xl"></i>
                </label>
                <ul tabindex="0"
                    class="dropdown-content z-[100] menu p-2 shadow-xl bg-base-100 rounded-box w-56 mt-2 border border-base-200">
                    <!-- Mobile Search -->
                    <li class="p-2">
                        <div class="join w-full">
                            <input type="text" placeholder="Ara..."
                                class="input input-bordered input-sm join-item w-full" />
                            <a href="/search" class="btn btn-primary btn-sm join-item">
                                <i class="ph ph-magnifying-glass"></i>
                            </a>
                        </div>
                    </li>
                    <div class="divider my-1"></div>
                    <li><a href="/">ğŸ  Ana Sayfa</a></li>
                    <li><a href="/search">ğŸ” KeÅŸfet</a></li>
                    <div class="divider my-1"></div>
                    <li><a href="/login">ğŸ”‘ GiriÅŸ Yap</a></li>
                    <li><a href="/register" class="text-primary font-medium">ğŸ“ KayÄ±t Ol</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

</html>